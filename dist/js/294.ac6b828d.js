"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[294],{71291:function(t,a,s){s.d(a,{Z:function(){return l}});var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"pagination"},[a("button",{attrs:{disabled:1==t.pageNo},on:{click:function(a){return t.$emit("getPageNo",t.pageNo-1)}}},[t._v("上一页")]),t.pageNo>=4?a("button",{class:{active:1==t.pageNo},on:{click:function(a){return t.$emit("getPageNo",1)}}},[t._v(" 1 ")]):t._e(),t.startNumAndEndNum.start>2?a("button",[t._v("...")]):t._e(),t._l(t.startNumAndEndNum.end,(function(s,e){return[s>=t.startNumAndEndNum.start?a("button",{key:e,class:{active:t.pageNo==s},on:{click:function(a){return t.$emit("getPageNo",s)}}},[t._v(" "+t._s(s)+" ")]):t._e()]})),t.startNumAndEndNum.end<=t.totalPage-Math.floor(t.continues/2)?a("button",[t._v("...")]):t._e(),t.startNumAndEndNum.end<t.totalPage?a("button",{class:{active:t.pageNo==t.totalPage},on:{click:function(a){return t.$emit("getPageNo",t.totalPage)}}},[t._v(" "+t._s(t.totalPage)+" ")]):t._e(),a("button",{attrs:{disabled:t.pageNo==t.totalPage},on:{click:function(a){return t.$emit("getPageNo",t.pageNo+1)}}},[t._v("下一页")]),a("button",{staticStyle:{"margin-left":"30px"}},[t._v("共"+t._s(t.total)+"条")])],2)},r=[],i={name:"Pagination",props:["pageNo","pageSize","total","continues"],computed:{totalPage(){return Math.ceil(this.total/this.pageSize)},startNumAndEndNum(){const{pageNo:t,continues:a,totalPage:s}=this;let e=0,r=0;if(a>s)e=1,r=s;else{let i=Math.floor(a/2);e=t-i,r=t+i,e<1&&(e=1,r=a),r>s&&(r=s,e=s-a+1)}return{start:e,end:r}}},methods:{}},o=i,c=s(1001),n=(0,c.Z)(o,e,r,!1,null,"28eca186",null),l=n.exports},48294:function(t,a,s){s.r(a),s.d(a,{default:function(){return _}});var e=function(){var t=this,a=t._self._c;return a("div",[a("TypeNav"),a("div",{staticClass:"main"},[a("div",{staticClass:"py-container"},[a("div",{staticClass:"bread"},[t._m(0),a("ul",{staticClass:"fl sui-tag"},[t.searchParams.categoryName?a("li",{staticClass:"with-x"},[t._v(" "+t._s(t.searchParams.categoryName)+" "),a("i",{on:{click:t.removeCategoryName}},[t._v("x")])]):t._e(),t.searchParams.keyword?a("li",{staticClass:"with-x"},[t._v(" "+t._s(t.searchParams.keyword)+" "),a("i",{on:{click:t.removeKeyword}},[t._v("x")])]):t._e(),t.searchParams.trademark?a("li",{staticClass:"with-x"},[t._v(" "+t._s(t.searchParams.trademark.split(":")[1])+" "),a("i",{on:{click:t.removeTrademark}},[t._v("x")])]):t._e(),t._l(t.searchParams.props,(function(s,e){return a("li",{key:e,staticClass:"with-x"},[t._v(" "+t._s(s.split(":")[1])+" "),a("i",{on:{click:function(a){return t.removeAttrvalue(s)}}},[t._v("x")])])}))],2)]),a("SearchSelector",{on:{getTrademarkName:t.getTrademarkName,attrsInfo:t.attrsInfo}}),a("div",{staticClass:"details clearfix"},[a("div",{staticClass:"sui-navbar"},[a("div",{staticClass:"navbar-inner filter"},[a("ul",{staticClass:"sui-nav"},[a("li",{class:{active:t.isOne},staticStyle:{cursor:"pointer"},on:{click:function(a){return t.changeOrder("1")}}},[a("a",[t._v("综合"),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isOne,expression:"isOne"}],staticClass:"iconfont",class:{"icon-jiantoushang":t.isAsc,"icon-jiantouxia":t.isDesc}})])]),a("li",{class:{active:t.isTwo},staticStyle:{cursor:"pointer"},on:{click:function(a){return t.changeOrder("2")}}},[a("a",[t._v("价格"),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isTwo,expression:"isTwo"}],staticClass:"iconfont",class:{"icon-jiantoushang":t.isAsc,"icon-jiantouxia":t.isDesc}})])])])])]),a("div",{staticClass:"goods-list"},[a("ul",{staticClass:"yui3-g"},t._l(t.goodList,(function(s){return a("li",{key:s.id,staticClass:"yui3-u-1-5"},[a("div",{staticClass:"list-wrap"},[a("div",{staticClass:"p-img"},[a("router-link",{attrs:{to:{name:"detail",params:{skuId:s.id}}}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.defaultImg,expression:"good.defaultImg"}]})])],1),a("div",{staticClass:"price"},[a("strong",[a("em",[t._v("¥")]),a("i",[t._v(t._s(s.price))])])]),a("div",{staticClass:"attr"},[a("a",{attrs:{target:"_blank",href:"item.html",title:"促销信息，下单即赠送三个月CIBN视频会员卡！【小米电视新品4A 58 火爆预约中】"}},[t._v(t._s(s.title))])]),t._m(1,!0),a("div",{staticClass:"operate"},[a("button",{staticClass:"sui-btn btn-bordered btn-danger",on:{click:function(a){return t.addOrUpdateShopCat(s.id,1)}}},[t._v(" 加入购物车 ")]),a("a",{staticClass:"sui-btn btn-bordered",attrs:{href:"javascript:void(0);"}},[t._v("收藏")])])])])})),0)]),a("Pagination",{attrs:{pageNo:this.searchParams.pageNo,pageSize:this.searchParams.pageSize,total:t.total,continues:5},on:{getPageNo:t.getPageNo}})],1)],1)])],1)},r=[function(){var t=this,a=t._self._c;return a("ul",{staticClass:"fl sui-breadcrumb"},[a("li",[a("a",{attrs:{href:"#"}},[t._v("全部结果")])])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"commit"},[a("i",{staticClass:"command"},[t._v("已有"),a("span",[t._v("2000")]),t._v("人评价")])])}],i=(s(57658),s(71291)),o=s(63822),c=function(){var t=this,a=t._self._c;return a("div",{staticClass:"clearfix selector"},[a("div",{staticClass:"type-wrap logo"},[a("div",{staticClass:"fl key brand"},[t._v("品牌")]),a("div",{staticClass:"value logos"},[a("ul",{staticClass:"logo-list"},t._l(t.trademarkList,(function(s){return a("li",{key:s.tmId,on:{click:function(a){return t.tradeMarkHandler(s)}}},[t._v(" "+t._s(s.tmName)+" ")])})),0)]),t._m(0)]),t._l(t.attrsList,(function(s){return a("div",{key:s.id,staticClass:"type-wrap"},[a("div",{staticClass:"fl key"},[t._v(t._s(s.attrName))]),a("div",{staticClass:"fl value"},[a("ul",{staticClass:"type-list"},t._l(s.attrValueList,(function(e,r){return a("li",{key:r,on:{click:function(a){return t.attrInfo(s,e)}}},[a("a",[t._v(t._s(e))])])})),0)]),a("div",{staticClass:"fl ext"})])}))],2)},n=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"ext"},[a("a",{staticClass:"sui-btn",attrs:{href:"javascript:void(0);"}},[t._v("多选")]),a("a",{attrs:{href:"javascript:void(0);"}},[t._v("更多")])])}],l={name:"SearchSelector",computed:{...(0,o.Se)(["attrsList","trademarkList"])},methods:{tradeMarkHandler(t){this.$emit("getTrademarkName",t)},attrInfo(t,a){this.$emit("attrsInfo",t,a)}}},d=l,u=s(1001),h=(0,u.Z)(d,c,n,!1,null,"cc68391a",null),m=h.exports,v={name:"Search",data(){return{searchParams:{category1Id:"",category2Id:"",category3Id:"",categoryName:"",keyword:"",order:"1:desc",pageNo:1,pageSize:3,props:[],trademark:""}}},components:{SearchSelector:m,Pagination:i.Z},mounted(){this.getSearchData()},beforeMount(){Object.assign(this.searchParams,this.$route.query,this.$route.params)},computed:{...(0,o.Se)(["goodList","attrsList","trademarkList","total"]),isOne(){return-1!=this.searchParams.order.indexOf("1")},isTwo(){return-1!=this.searchParams.order.indexOf("2")},jianTou(){return-1!=this.searchParams.order.indexOf("desc")?"&#xe62d;":"&#xe62c;"},isAsc(){return-1!=this.searchParams.order.indexOf("asc")},isDesc(){return-1!=this.searchParams.order.indexOf("desc")}},methods:{getSearchData(){this.$store.dispatch("getSearchList",this.searchParams)},removeCategoryName(){this.searchParams.categoryName=void 0,this.searchParams.category1Id=void 0,this.searchParams.category2Id=void 0,this.searchParams.category3Id=void 0,this.getSearchData(),this.$route.params&&this.$router.push({name:"search",params:this.$route.params})},removeKeyword(){this.searchParams.keyword=void 0,this.getSearchData(),this.$route.query&&this.$router.push({name:"search",query:this.$route.query})},getTrademarkName(t){this.searchParams.trademark=`${t.tmId}:${t.tmName}`,this.getSearchData()},removeTrademark(){this.searchParams.trademark=void 0,this.getSearchData()},attrsInfo(t,a){let s=`${t.attrName}:${a}`;-1==this.searchParams.props.indexOf(s)&&this.searchParams.props.push(s),this.getSearchData()},removeAttrvalue(t){this.searchParams.props=this.searchParams.props.filter((a=>a!=t)),this.getSearchData()},changeOrder(t){let a=this.searchParams.order.split(":");t!=a[0]&&(a[0]=t),a[1]="desc"===a[1]?"asc":"desc",this.searchParams.order=a.join(":"),this.getSearchData()},getPageNo(t){this.searchParams.pageNo=t,this.getSearchData()},addOrUpdateShopCat(t,a){console.log(t,a),this.$store.dispatch("addOrUpdateShopCat",{skuid:t,skuNum:a}).then((t=>{this.$router.push("/shopCart")}))}},watch:{$route:{handler(){Object.assign(this.searchParams,this.$route.query,this.$route.params),this.getSearchData(),this.searchParams.category1Id="",this.searchParams.category2Id="",this.searchParams.category3Id=""}}}},g=v,p=(0,u.Z)(g,e,r,!1,null,"0a2d8208",null),_=p.exports}}]);